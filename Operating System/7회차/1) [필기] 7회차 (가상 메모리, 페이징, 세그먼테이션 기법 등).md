![Untitled](https://prod-files-secure.s3.us-west-2.amazonaws.com/e2aaace0-24ef-4ae8-bed4-d8cb2e34acd9/f5f4e6bc-27fb-424b-bf9b-91fce806fce2/Untitled.png)

```
세그멘테이션, 페이징 (내부단편화 ,외부단편화)
```

---

- 메모리의 (오버레이 + 스왑) 자체가 가상 메모리를 이야기할 초석이다.

### 가상 메모리 등장 배경

- 초창기 컴퓨터에는 가장 큰 실행 애플리케이션의 주소 공간보다 큰 RAM의 용량을 보유해야 했다. 그렇지 않으면 **메모리 부족**으로 해당 애플리케이션을 실행할 수 없었다.
- 이후 컴퓨터에서는 **오버레이 기법(**애플리케이션의 일부분만을 메모리에 올려 실행하도록 지정할 수 있게 하는 기법**)**을 사용해 메모리 부족 문제를 해결하고자 했다.
- 그러나, 이 방식도 시스템 프로그램을 위한 충분한 메모리를 갖추고 있지 않은 경우에는 똑같은 메모리 부족 오류 발생하고 만다. (메모리 크기에 구애 받는다.)
- **가상 메모리 기법은 메모리 크기에 구애X. 메모리 관리를 더 효율적으로 가능케 할 수 있는 방식이다.**

### 가상 메모리 (Virtual Memory)

---

- 가상 메모리는 운영체제에서 제공하는 추상화된 메모리 개념
- 실제 물리적인 메인 메모리 (RAM)보다 큰 용량의 메모리 공간을 프로세스에게 제공하는 기술
- 이를 통해 여러 프로세스가 동시에 실행될 때 더 많은 메모리 사용이 가능하다.

> **가상 메모리 핵심 : 필요한 부분만 메모리에 적재 (부분 적재) 하는 것이다.**
> 
- 가상 메모리는 추상화 기법을 사용하여 물리적 메모리와 프로세스에 대한 가상 메모리 공간을 제공한다.
- 이를 통해 **각 프로세스가 ‘자신만의 독립적이 메모리 공간을 가지고 있는 것처럼 동작’**하며, 물리적 메모리 관리와 프로세스 간의 충돌을 피할 수 있다.
- 또한, 가상 메모리는 메모리 관리의 효율성을 높이고, 여러 프로세스가 동시에 실행할 수 있는 환경을 제공한다.

### 가상 메모리와 MMU | 가상 주소 → 물리주소 변환

- 가상 주소는 MMU (메모리 관리자)에 의해 실제 메모리 상에 이쓴 실제 주소로 변환된다.
- 사용자는 실제 주소 의식할 필요 없이도 프로그램 구축 가능하다.

### (1) 가상 주소

### (2) 물리 주소

페이지 테이블 관리

속도 향상을 위해 TLB 사용 

MMU 메모리 관리자 역할 

1) 배티 정책, 가져오기 정책, 재배치 정책 

---

**메모리 할당 방식** 

1. **연속 할당 방식** 
- • 각각의 프로세스가 메모리에 물리적으로 **연속적인** 공간에 적재되도록 하는 것
- 프로세스를 메모리에 올릴 때, 주소 공간을 메모리의 한 곳에 연속적으로 적재하는 방식
- 속적인 메모리 할당 방식에서는 물리적인 메모리 위치가 연속적으로 할당됩니다. 이는 프로세스가 메모리에 연속적으로 위치하는 것을 의미합니다.

**(1) 고정 분할 방식** 

: 물리적 메모리를 고정된 크기로 분할하고, 각 분할된 곳에 프로세스를 적재

고정 분할 방식에는 외부 단편화, 내부 단편 발생 가능 

→ 외부 단편화 : 프로그램 크기 > 각 분할 크기 (분할된 곳이 비어있어도 적재 못함)

→ 내부 단편화 : 프로그램 크기 < 각 분할 크기 (적재 후 남는 공간)

즉, 고정 분할 방식은 하나의 분할 공간에 하나의 프로세스만 들어가는 특성 때문에, 메모리 낭비가 심하다

(**2) 가변 분할 방식**

: 메모리에 적재되는 프로그램 크기에 따라 분할 크기, 개수가 동적으로 변함

즉, 프로그램 크기에 맞게 할당하므로 내부 단편화가 X

그러나, 여전히 외부 단편화 문제는 있다.

예를 들어, 프로세스들이 종료하여 여러 공간에 홀이 생긴다. 프로세스 외부에 여러 빈 공간들이 생기는데, 이를 외부 단편화 

- (1) 프로세스 외부의 빈 가용 공간들 중에 어떤 공간에 프로세스를 적재하느냐 :

= 동적 메모리 할당할 방법 

그치만 종료된 프로세스 공간이 중간 중간 Hole(홀) 들이 메모리 내 여러 곳에 산발적으로 생긴다.

이때, 어떤 Hole에 새 프로그램을 적재 시킬까 (즉, 가용 공간 중 어떤 위치에 올릴 건가)

→ 동적 메모리 할당 문제 (3)

최초 적합

최적 적합

최악 적합

- (2) 메모리 컴팩션 : 그 가용공간 홀들의 구멍을 모으자.

홀 모아서 취합하여 하나의 큰 가용 공간을 만든다.

단, 이 방식은 메모리 상의 위치를 이동 시킬 떄 비용이 많이 듬 

---

1. **불연속 메모리 할당 방식**
- 하나의 프로세스가 메모리의 **여러 영역에 분산**되어 올라갈 수 있음
- 하나의 프로세스가 물리적 메모리 여러 위치에 분산되어 올라갈 수 있는 메모리 할당 기법
- 주로 가상 메모리를 활용하므로 프로세스의 물리적인 메모리 위치가 연속적이지 않습니다. 가상 메모리는 프로세스에게 실제 물리적 메모리와 독립적인 논리적인 주소 공간을 제공합니다. 불연속 메모리 할당은 이러한 가상 메모리를 이용하여 프로세스를 여러 부분으로 나누어 메모리에 할당하는 방식입니다.

(1) 페이징

(2) 세그먼테이션

(3) 페이징 + 세그먼테이션 혼합